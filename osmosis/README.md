# Docker images

Scipt for building docker images to run osmosis on containers. This application needs a Java keystore that is generated by the new_star_local_key.sh script. 

It is important to have docker-entrypoint.sh and the generated keystore on the root folder so the docker build can copy them into the images.

## Usage

First run new_star_local_key.sh and follow the steps provided to generate the Java keystore and change the permissions to 775.

The BUILD.sh script builds the docker images for Ubuntu and Centos. It also allows to specify an osmosis version to download from AWS. To check the help of this script run BUILD.sh -h.

Important note: In order to push the images to AWS ECR it is required to authenticate docker on the AMAZON ECR private registry, for additional information check: https://docs.aws.amazon.com/AmazonECR/latest/userguide/registry_auth.html

## Folders

The `dockerfiles` directory have the dockerfiles for the different distributions (currently Ubuntu and Centos).

The `lib` has the scripts used for creating the tar files used by the docker images.

## Files
### docker-entrypoint.sh

Used on the docker containers for running osmosis and update the configuration files according to the flags provided.
## star_local file

This is the Java keystore for running osmosis. To generate it, run the new_star_local_key.sh script. The resulting file should be located at the osmosis folder of the Docker repository, the permissions needs to be set to 775.

## osmosis_files.sh

Creates the osmosis tar file to use on the docker images.